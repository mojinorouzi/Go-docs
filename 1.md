# GO

## Go Commands

go run main.go => compile and run app
go build main.go => compile and return executable file


## what does 'package main' mean ?

- package is equal with project and workspace 
- package is collection of codes that they are related of one project
- related source code must have same package name in first line of code

## there is two type of package

### Executable packages (package main) 

- we define 'package main' when program will compile and execute (do something)

notice : must have a function called 'main'


### Reusable packages (import "package-name")

- are dependencies and helpers (there are not execute directly)

- there is two type of Reusable package 

   1 - standard libs (Developed by google)

   2 - packages that developed by other person or teams

---

## Go Modules

Go modules are the official **dependency management system** in Go (since Go 1.11). Modules let you manage external packages and versioning in your projects.

### What is a Module?

A **module** is a collection of Go packages stored in a directory with a `go.mod` file at the root.

The `go.mod` file:
- Defines the module path (import path)
- Lists all dependencies and their versions
- Tracks Go version used in the project

---

## Creating a New Module

### Initialize a module

```bash
go mod init example.com/myproject
```

This creates a `go.mod` file:

```go
module example.com/myproject

go 1.21
```

**Note**: The module path is typically:
- Your GitHub repo: `github.com/username/repo`
- Your domain: `example.com/project`
- Or any unique name if it's a local project

---

## Installing Packages

### Install a package

When you import a package in your code and run `go build` or `go run`, Go automatically downloads it.

**Manual installation:**

```bash
go get github.com/gin-gonic/gin
```

This:
- Downloads the package
- Adds it to `go.mod`
- Creates/updates `go.sum` (dependency checksums)

### Install a specific version

```bash
go get github.com/gin-gonic/gin@v1.9.0
```

### Install the latest version

```bash
go get -u github.com/gin-gonic/gin
```

---

## go.mod File Example

```go
module github.com/myuser/myproject

go 1.21

require (
	github.com/gin-gonic/gin v1.9.1
	github.com/lib/pq v1.10.9
)
```

**Explanation:**
- `module` → Your project's import path
- `go 1.21` → Go version
- `require` → Direct dependencies

---

## go.sum File

The `go.sum` file contains **cryptographic checksums** of your dependencies.

Purpose:
- Verifies package integrity
- Prevents tampering
- Ensures reproducible builds

✅ **Always commit `go.sum` to version control**

---

## Removing Unused Packages

### Clean up unused dependencies

```bash
go mod tidy
```

This command:
- Removes unused packages from `go.mod`
- Adds missing dependencies
- Updates `go.sum`

✅ **Run this regularly** to keep your dependencies clean

---

## Common Go Module Commands

| Command                | Purpose                                    |
| ---------------------- | ------------------------------------------ |
| `go mod init`          | Create a new module                        |
| `go mod tidy`          | Clean up dependencies                      |
| `go get package@version` | Install/update a specific package         |
| `go get -u`            | Update all dependencies                    |
| `go mod download`      | Download dependencies to local cache       |
| `go mod verify`        | Verify dependencies haven't been modified  |
| `go mod vendor`        | Copy dependencies to `vendor/` folder      |
| `go list -m all`       | List all dependencies                      |

---

## Working with Modules

### 1. Start a new project

```bash
mkdir myproject
cd myproject
go mod init github.com/username/myproject
```

### 2. Add code and import packages

```go
package main

import "github.com/gin-gonic/gin"

func main() {
    r := gin.Default()
    r.Run()
}
```

### 3. Download dependencies

```bash
go mod tidy
```

Or just run:

```bash
go run main.go
```

Go will automatically download dependencies on first run.

---

## Removing a Package Completely

### Step 1: Remove the import from your code

Remove or comment out the import:

```go
// import "github.com/old-package/unused"
```

### Step 2: Clean up

```bash
go mod tidy
```

This removes the package from `go.mod` and `go.sum`.

---

## What to Put in .gitignore

### Recommended .gitignore for Go Projects

```gitignore
# Binaries for programs and plugins
*.exe
*.exe~
*.dll
*.so
*.dylib

# Test binary, built with `go test -c`
*.test

# Output of the go coverage tool
*.out

# Go workspace file
go.work

# Dependency directories (if using vendor)
vendor/

# Build output
/bin/
/dist/

# IDE-specific files
.idea/
.vscode/
*.swp
*.swo
*~

# macOS
.DS_Store

# Environment files
.env
.env.local
```

### Important Notes

✅ **DO commit:**
- `go.mod` 
- `go.sum`

❌ **DO NOT commit:**
- `vendor/` (unless you explicitly vendor dependencies)
- Compiled binaries (*.exe, *.out)
- `go.work` (local workspace file)
- IDE settings
- `.env` files

---

## Vendor Directory (Optional)

If you want to **copy all dependencies** into your project (useful for offline builds):

```bash
go mod vendor
```

This creates a `vendor/` folder with all dependencies.

To use vendored dependencies:

```bash
go build -mod=vendor
```

⚠️ **Most projects don't need vendoring** - Go modules work well without it.

---

## Best Practices

✅ Run `go mod tidy` regularly

✅ Commit both `go.mod` and `go.sum`

✅ Use semantic versioning for your own packages

✅ Pin important dependencies to specific versions

✅ Review dependency updates before applying them

❌ Don't edit `go.mod` manually (let Go tools manage it)

❌ Don't commit `vendor/` unless necessary

❌ Don't commit compiled binaries

---

## Quick Reference

```bash
# Initialize module
go mod init example.com/project

# Add dependency (automatically)
go get github.com/some/package

# Update all dependencies
go get -u ./...

# Clean up
go mod tidy

# Verify integrity
go mod verify

# List dependencies
go list -m all
```

---
