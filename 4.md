# Modern File I/O in Go (Go 1.16+)

This document explains **file and I/O operations in Go using the newest approach** (Go **1.16 and later**).

> ✅ `io/ioutil` is **deprecated**
> ✅ Use **`os`** and **`io`** packages instead

---

## Why `io/ioutil` Was Removed

Before Go 1.16, many file helpers lived in `io/ioutil`.

Problems:

* APIs were scattered
* Duplicated responsibilities
* Confusing for beginners

Solution:

> Go moved these functions to more logical packages: **`os`** and **`io`**.

---

## Current Recommended Packages

| Package | Purpose                         |
| ------- | ------------------------------- |
| `os`    | Files, directories, permissions |
| `io`    | Reading & writing streams       |
| `bufio` | Buffered I/O                    |

---

## Reading a File (Modern Way)

### Read Entire File

```go
import (
    "fmt"
    "os"
)

func main() {
    data, err := os.ReadFile("example.txt")
    if err != nil {
        panic(err)
    }

    fmt.Println(string(data))
}
```

✔ Simple
❌ Not ideal for very large files

---

## Writing to a File

```go
import "os"

func main() {
    err := os.WriteFile(
        "example.txt",
        []byte("Hello Go"),
        0644,
    )

    if err != nil {
        panic(err)
    }
}
```

### File Permission Explained

* `0` → octal value
* `6` → read + write (owner)
* `4` → read (group)
* `4` → read (others)

---

## Reading from an `io.Reader`

```go
import "io"

data, err := io.ReadAll(reader)
```

Used with:

* HTTP responses
* Files
* Buffers

---

## Working with Files Using `os.Open`

```go
file, err := os.Open("example.txt")
if err != nil {
    panic(err)
}
defer file.Close()

content, err := io.ReadAll(file)
```

✔ Better control
✔ Required for streaming

---

## Writing Using `os.Create`

```go
file, err := os.Create("example.txt")
if err != nil {
    panic(err)
}
defer file.Close()

file.WriteString("Hello Go")
```

---

## Temporary Files & Directories

### Create Temporary File

```go
tmpFile, err := os.CreateTemp("", "example-*.txt")
```

---

### Create Temporary Directory

```go
tmpDir, err := os.MkdirTemp("", "example-dir")
```

---

## Streaming Large Files (Best Practice)

```go
src, _ := os.Open("big.txt")
dst, _ := os.Create("copy.txt")
defer src.Close()
defer dst.Close()

io.Copy(dst, src)
```

✔ Memory efficient
✔ Recommended for large files

---

## Old vs New Comparison

| Old (Deprecated)   | New (Recommended) |
| ------------------ | ----------------- |
| `ioutil.ReadFile`  | `os.ReadFile`     |
| `ioutil.WriteFile` | `os.WriteFile`    |
| `ioutil.ReadAll`   | `io.ReadAll`      |
| `ioutil.TempFile`  | `os.CreateTemp`   |
| `ioutil.TempDir`   | `os.MkdirTemp`    |

---

## Best Practices (Modern Go)

* Use `os.ReadFile` only for small files
* Use streaming for large files
* Always `defer file.Close()`
* Handle errors properly
* Avoid deprecated APIs

---

## One-Line Summary

> Modern Go separates responsibilities: **`os` handles files**, **`io` handles data flow**.

---

This document reflects **current Go standards** and should be used for **new projects**.
